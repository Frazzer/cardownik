<ion-header>
  <ion-toolbar>
    <ion-title>Dodawanie karty</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancel()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="content-center ion-padding ion-margin">
  <ion-list content="full" class="cardStyle">
    <ion-grid>
      <ion-row class="ion-margin">
        <ion-col>
          <ion-header>Wprowadź dane do formularza</ion-header>
        </ion-col>
      </ion-row>
      <form [formGroup]="cardForm" (ngSubmit)="confirm()">
        <ion-row>
          <ion-col size="10">
            <ion-item lines="none">
              <ion-input
                type="text"
                label="Nazwa karty"
                labelPlacement="floating"
                placeholder="Wprowadź nazwę karty"
                formControlName="cardName"
                fill="solid"
                clearInput
                required
              ></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="2"></ion-col>
        </ion-row>
        <ion-row class="ion-align-items-center">
          <ion-col size="10">
            <ion-item lines="none">
              <ion-input
                type="text"
                label="Kod kreskowy"
                labelPlacement="floating"
                placeholder="Wprowadź wartość kodu kreskowego"
                formControlName="barcode"
                fill="solid"
                clearInput
                required
              ></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="2">
            <div class="qrcodeImage content-center">
              <qrcode
                [qrdata]="this.cardForm.controls['barcode'].value || ''"
                [allowEmptyString]="true"
                [cssClass]="'qrcode'"
                [colorDark]="'#0c0c0c'"
                [colorLight]="'#ffffff'"
                [elementType]="'svg'"
                [errorCorrectionLevel]="'M'"
                [margin]="2"
                [width]="50"
              ></qrcode>
            </div>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="10">
            <ion-item lines="none">
              <ion-input
                type="text"
                label="Adres obiektu"
                labelPlacement="floating"
                placeholder="Wprowadź adres obiektu"
                formControlName="objectLocalization"
                fill="solid"
                clearInput
                required
              ></ion-input>
            </ion-item>
<!--            <div-->
<!--              *ngIf="this.cardForm.controls['objectLocalization'].invalid"-->
<!--            >-->
<!--              <div-->
<!--                class="ion-padding-horizontal"-->
<!--                *ngIf="this.cardForm.controls['objectLocalization'].errors?.['required']"-->
<!--              >-->
<!--                <ion-text color="#7a202c">Adres lokalizacji jest wymagany</ion-text>-->
<!--              </div>-->
<!--              <div-->
<!--                class="ion-padding-horizontal"-->
<!--                color="#7a202c"-->
<!--                *ngIf="this.cardForm.controls['objectLocalization'].errors?.['minlength']"-->
<!--              >-->
<!--                <ion-text color="#7a202c">Adres lokalizacji powinien zawierać minimalnie 2 znaki</ion-text>-->
<!--              </div>-->
<!--            </div>-->
          </ion-col>
          <ion-col size="2"></ion-col>
        </ion-row>
        <ion-row class="ion-margin">
          <ion-col size="6">
            <ion-button
              expand="block"
              color="medium"
              (click)="cancel()"
            >Anuluj
            </ion-button>
          </ion-col>
          <ion-col size="6">
            <ion-button
              expand="block"
              type="submit"
              color="{{cardForm.valid ? 'primary' : 'danger'}}"
              disabled="{{!cardForm.valid}}"
              (click)="confirm()"
              [strong]="true"
            >{{cardForm.valid ? 'Zapisz' : 'Błędne dane'}}
            </ion-button>
          </ion-col>
        </ion-row>
      </form>
    </ion-grid>
  </ion-list>
</ion-content>
